{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/pandemona/Documents/From Backup/Vegaani_Application/ReactApplication/vegancos/screens/ProductDetailScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport firebase from \"../database/firebaseDb\";\nimport Card from \"../components/Card\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { Icon } from 'react-native-elements';\nimport Colors from \"../constants/Colors\";\nimport axios from 'axios';\n\nvar ProductDetailScreen = function ProductDetailScreen(props) {\n  var sortedData = global.myData.filter(function (products) {\n    return products.pk === global.itemId;\n  });\n  var entityRef = firebase.firestore().collection('Favorites');\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      itemIsFavorite = _useState2[0],\n      setItemIsFavorite = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      userID = _useState6[0],\n      setUserID = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      favorites = _useState8[0],\n      setFavorites = _useState8[1];\n\n  var user = firebase.auth().currentUser;\n  var name, email, uid;\n\n  function fetchData() {\n    return _regeneratorRuntime.async(function fetchData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (user != null) {\n              name = user.displayName;\n              uid = user.uid;\n              setUserID(true);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function fetchFavs() {\n    var res, data, filterArray;\n    return _regeneratorRuntime.async(function fetchFavs$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            res = null;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(fetch(\"http://127.0.0.1:8000/vegan/favorites/\"));\n\n          case 4:\n            res = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n            setErrors(true);\n\n          case 10:\n            _context2.prev = 10;\n            _context2.next = 13;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 13:\n            data = _context2.sent;\n            filterArray = data.filter(function (data) {\n              return data.fields.authorID === uid;\n            });\n            setFavorites(filterArray);\n            _context2.next = 22;\n            break;\n\n          case 18:\n            _context2.prev = 18;\n            _context2.t1 = _context2[\"catch\"](10);\n            setErrors(true);\n            setSomeErrors(\"ERROR: \" + hasError + \" my error \" + _context2.t1);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 7], [10, 18]], Promise);\n  }\n\n  useEffect(function () {\n    if (isLoading == true) {\n      setLoading(false);\n      fetchData();\n      fetchFavs();\n    }\n\n    setLoading(false);\n  });\n\n  function filter() {\n    var filterArray;\n    return _regeneratorRuntime.async(function filter$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            filterArray = favorites.filter(function (data) {\n              return data.fields.title === global.itemTitle && data.fields.authorID === uid;\n            });\n\n            if (!filterArray.length) {\n              console.log(\"Array is empty\");\n              setItemIsFavorite(false);\n            } else {\n              console.log(\"filter has elements\");\n              setItemIsFavorite(true);\n            }\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var saveFavoriteHandler = function saveFavoriteHandler() {\n    saveFavorite();\n    Alert.alert(\"Item has been added to your favorites!!\");\n  };\n\n  function saveFavorite() {\n    return _regeneratorRuntime.async(function saveFavorite$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            axios.post(\"http://127.0.0.1:8000/vegan/addfavs\", {\n              id: \"null\",\n              title: global.itemTitle,\n              brand: global.itemBrand,\n              authorID: uid,\n              photo: global.itemPhoto\n            }).then(function (response) {\n              console.log(response);\n              console.log(uid);\n            }).catch(function (error) {\n              console.log(error);\n            });\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(View, {\n    style: styles.background,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 1\n    }\n  }, React.createElement(View, {\n    style: styles.MainContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 1\n    }\n  }, React.createElement(FlatList, {\n    data: sortedData,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: styles.image,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: styles.titleBottom,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.title,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, item.fields.title)), React.createElement(Text, {\n        style: styles.row,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, item.fields.description), React.createElement(View, {\n        style: styles.image,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        style: styles.tinyLogo,\n        source: {\n          uri: item.fields.photo\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }\n      })), React.createElement(View, {\n        style: styles.where,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 10\n        }\n      }, React.createElement(View, {\n        style: styles.titleBottom,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 12\n        }\n      }, React.createElement(Text, {\n        style: styles.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }\n      }, \" Where can I find this product? \")), React.createElement(Text, {\n        style: styles.stores,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }, item.fields.stores)), React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.stores,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      }, item.fields.reference)), React.createElement(View, {\n        style: styles.favorite,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }, itemIsFavorite === true ? React.createElement(View, {\n        style: styles.favBack,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }, \" This item is already a favorite of yours!\")) : React.createElement(View, {\n        style: styles.favBack,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: saveFavoriteHandler,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }\n      }, \"Add this to my favorites \", React.createElement(Icon, {\n        name: \"like\",\n        type: \"evilicon\",\n        size: \"30\",\n        color: \"black\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 64\n        }\n      }), \" \")))));\n    },\n    style: {\n      marginTop: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }))));\n};\n\nProductDetailScreen.navigationOptions = function (navigationData) {\n  global.itemTitle = navigationData.navigation.getParam('itemTitle');\n  global.itemId = navigationData.navigation.getParam('itemId');\n  global.itemDescription = navigationData.navigation.getParam(\"itemDescription\");\n  global.itemPhoto = navigationData.navigation.getParam(\"itemPhoto\");\n  global.itemStore = navigationData.navigation.getParam(\"itemStore\");\n  global.itemBrand = navigationData.navigation.getParam(\"itemBrand\");\n  global.itemCategory = navigationData.navigation.getParam(\"itemCategory\");\n  return {\n    headerTitle: itemTitle\n  };\n};\n\nvar styles = StyleSheet.create({\n  background: {\n    flex: 1,\n    backgroundColor: Colors.background\n  },\n  MainContainer: {\n    justifyContent: 'flex-start',\n    flex: 1,\n    margin: 15,\n    backgroundColor: Colors.background\n  },\n  tinyLogo: {\n    width: 200,\n    height: 200\n  },\n  image: {\n    alignSelf: 'center'\n  },\n  row: {\n    fontSize: 13,\n    padding: 12\n  },\n  title: {\n    fontSize: 30,\n    alignContent: 'center',\n    alignSelf: 'center'\n  },\n  titleBottom: {\n    borderBottomWidth: 1,\n    paddingBottom: 10\n  },\n  text: {\n    fontSize: 20,\n    color: Colors.primaryText\n  },\n  favorite: {\n    margin: 5,\n    paddingTop: 40\n  },\n  stores: {\n    textAlign: 'center',\n    paddingTop: 10\n  },\n  favBack: {\n    backgroundColor: 'white',\n    padding: 5,\n    borderRadius: 50,\n    borderWidth: 2,\n    borderColor: 'lightpink',\n    marginBottom: 20,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'center',\n    width: '80%'\n  },\n  where: {\n    alignContent: 'center',\n    alignSelf: 'center',\n    width: '100%',\n    paddingTop: 50\n  }\n});\nexport default ProductDetailScreen;","map":{"version":3,"sources":["/Users/pandemona/Documents/From Backup/Vegaani_Application/ReactApplication/vegancos/screens/ProductDetailScreen.js"],"names":["React","useState","useEffect","firebase","Card","LinearGradient","TouchableOpacity","Icon","Colors","axios","ProductDetailScreen","props","sortedData","global","myData","filter","products","pk","itemId","entityRef","firestore","collection","itemIsFavorite","setItemIsFavorite","isLoading","setLoading","userID","setUserID","favorites","setFavorites","user","auth","currentUser","name","email","uid","fetchData","displayName","fetchFavs","res","fetch","setErrors","json","data","filterArray","fields","authorID","setSomeErrors","hasError","title","itemTitle","length","console","log","saveFavoriteHandler","saveFavorite","Alert","alert","post","id","brand","itemBrand","photo","itemPhoto","then","response","catch","error","styles","background","MainContainer","item","index","toString","image","titleBottom","row","description","tinyLogo","uri","where","text","stores","reference","favorite","favBack","marginTop","navigationOptions","navigationData","navigation","getParam","itemDescription","itemStore","itemCategory","headerTitle","StyleSheet","create","flex","backgroundColor","justifyContent","margin","width","height","alignSelf","fontSize","padding","alignContent","borderBottomWidth","paddingBottom","color","primaryText","paddingTop","textAlign","borderRadius","borderWidth","borderColor","marginBottom","alignItems"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { Image,  FlatList, Text, StyleSheet, View,Alert } from 'react-native';\nimport firebase from '../database/firebaseDb';\nimport Card from '../components/Card';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { Icon } from 'react-native-elements';\nimport Colors from '../constants/Colors';\nimport axios from 'axios';\n\n\n\n\n\nconst ProductDetailScreen = props => {\n  const sortedData = global.myData.filter(\n    products => products.pk === global.itemId);\n    const entityRef =   firebase.firestore().collection('Favorites')\nconst [itemIsFavorite, setItemIsFavorite] = useState(true);\nconst [isLoading, setLoading] = useState(true);\nconst [userID, setUserID] = useState(false);\nconst [favorites, setFavorites] = useState(\"\");\nvar user = firebase.auth().currentUser;\nvar name, email, uid;\n\nasync function fetchData() {\n  if (user != null) {\n    name = user.displayName;\n    uid = user.uid;  \n    setUserID(true);\n  }\n}\n\nasync function fetchFavs() {\n  let res = null;\n  try {\n    res = await fetch(\"http://127.0.0.1:8000/vegan/favorites/\");\n  }\n  catch (error) {\n    setErrors(true);\n  }\n  try {\n    const data = await res.json();\n    const filterArray = data.filter(data => data.fields.authorID === uid)\n\n    setFavorites(filterArray);\n    \n     \n \n  }\n  catch (err) {\n    setErrors(true);\n    setSomeErrors(\"ERROR: \" + hasError + \" my error \" + err);\n  }\n}\n\nuseEffect(() => {\n  if (isLoading == true) {\n    setLoading(false);\n    fetchData();\n    fetchFavs();\n  \n  }\n  setLoading(false)\n});\n\nasync function filter(){\n  \n  const filterArray = favorites.filter(data =>\n     data.fields.title === global.itemTitle &&\n     data.fields.authorID === uid\n     )\n  if (!filterArray.length){\n    console.log(\"Array is empty\")   \n     setItemIsFavorite(false)\n    } else {\n      console.log(\"filter has elements\")\n     setItemIsFavorite(true)\n    }\n \n}\n\n\nconst saveFavoriteHandler=()=>{\n\n  saveFavorite();\n  Alert.alert(\"Item has been added to your favorites!!\")\n\n}\nasync function saveFavorite() {\n    axios\n    .post(\"http://127.0.0.1:8000/vegan/addfavs\",\n     {\n      id: \"null\",\n      title: global.itemTitle,\n      brand: global.itemBrand, \n      authorID: uid,\n      photo: global.itemPhoto\n\n        } )\n    .then(function (response) {\n      console.log(response);\n      console.log(uid)\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n  }\n\n\n  return (\n<View style={styles.background}>\n    <View style={styles.MainContainer}>\n\n<Card>\n      <FlatList\n        data={sortedData}\n        keyExtractor={(item, index) => index.toString()}\n        renderItem={({ item }) =>\n          <View style={styles.image}>\n            <View style={styles.titleBottom}>\n            <Text style={styles.title}>{item.fields.title}</Text>\n            </View>\n            <Text style={styles.row}>{item.fields.description}</Text>\n            \n         \n            <View style={styles.image}>\n              <Image\n                style={styles.tinyLogo}\n                source={{\n                  uri: item.fields.photo,\n                }}\n              />\n            </View>\n         <View style={styles.where}>\n           <View style={styles.titleBottom}>\n            <Text style={styles.text}> Where can I find this product? </Text>\n            </View>\n            <Text style={styles.stores}>{item.fields.stores}</Text>\n            </View>\n            <View>\n            <Text style={styles.stores}>{item.fields.reference}</Text>\n            </View>\n            <View style={styles.favorite}>\n          \n        {itemIsFavorite === true?  (\n          <View style={styles.favBack}>\n      <Text style={styles.text}> This item is already a favorite of yours!</Text>\n      </View>\n        ): (\n          <View style={styles.favBack}>\n          <TouchableOpacity onPress ={saveFavoriteHandler}>\n          \n            <Text style={styles.text}>Add this to my favorites <Icon name='like'\ttype='evilicon'\tsize='30' color= 'black'\t/> </Text>\n         \n          </TouchableOpacity>\n          </View>\n        )}\n       </View>\n          </View>\n        }\n        style={{ marginTop: 10 }} />\n</Card>\n</View>\n</View>\n  );\n}\n\nProductDetailScreen.navigationOptions = navigationData => {\n\n  global.itemTitle = navigationData.navigation.getParam('itemTitle');\n  global.itemId = navigationData.navigation.getParam('itemId');\n  global.itemDescription = navigationData.navigation.getParam(\"itemDescription\");\n  global.itemPhoto = navigationData.navigation.getParam(\"itemPhoto\");\n  global.itemStore = navigationData.navigation.getParam(\"itemStore\");\n  global.itemBrand = navigationData.navigation.getParam(\"itemBrand\");\n  global.itemCategory = navigationData.navigation.getParam(\"itemCategory\");\n\n  return {\n    headerTitle: itemTitle,\n  };\n};\n\n\nconst styles = StyleSheet.create({\n  background: {\n    flex: 1,\n    backgroundColor: Colors.background\n  },\n  MainContainer: {\n    justifyContent: 'flex-start',\n    flex: 1,\n  margin: 15,\n    backgroundColor: Colors.background,\n\n  },\n  tinyLogo: {\n    width: 200,\n    height: 200,\n  },\n  image: {\n    alignSelf: 'center',\n  },\n\n  row: {\n    fontSize: 13,\n    padding: 12\n  },\n  title: {\n    fontSize: 30,\n    alignContent: 'center',\n    alignSelf: 'center',\n  },\n  titleBottom: {\n    borderBottomWidth: 1,\n    paddingBottom: 10,\n  },\n\n  text: {\n    fontSize: 20,\n    color: Colors.primaryText,\n   \n  },\n  favorite: {\n    margin: 5,\n    paddingTop: 40,\n   \n  },\n  stores: {\n    textAlign: 'center',\n    paddingTop: 10,\n  },\n  favBack: {\n    backgroundColor: 'white',\n    padding: 5,\n    borderRadius: 50,\n    borderWidth: 2,\n    borderColor: 'lightpink',\n    marginBottom: 20,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'center',\n    width: '80%',\n  \n    \n  },\n  where: {\n    alignContent: 'center',\n    alignSelf: 'center',\n    width: '100%',\n    paddingTop: 50,\n  }\n\n\n});\n\nexport default ProductDetailScreen;\n\n"]},"metadata":{},"sourceType":"module"}