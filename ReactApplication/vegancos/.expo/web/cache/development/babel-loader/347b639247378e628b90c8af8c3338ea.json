{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/pandemona/Documents/From Backup/Vegaani_Application/ReactApplication/vegancos/screens/FavoritesScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport axios from 'axios';\nimport firebase from 'firebase';\nimport Card from \"../components/Card\";\nimport Colors from \"../constants/Colors\";\nimport { Icon } from 'react-native-elements';\n\nvar FavoriteScreen = function FavoriteScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasError = _useState2[0],\n      setErrors = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      someError = _useState4[0],\n      setSomeErrors = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      myFilter = _useState6[0],\n      setMyFilter = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userID = _useState8[0],\n      setUserID = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      data = _useState10[0],\n      setData = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isLoading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var user = firebase.auth().currentUser;\n  var name, uid;\n\n  function fetchData() {\n    return _regeneratorRuntime.async(function fetchData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (user != null) {\n              name = user.displayName;\n              uid = user.uid;\n              setUserID(true);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function fetchFavs() {\n    var res, _data, filterArray;\n\n    return _regeneratorRuntime.async(function fetchFavs$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            res = null;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(fetch(\"http://127.0.0.1:8000/vegan/favorites/\"));\n\n          case 4:\n            res = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n            setErrors(true);\n\n          case 10:\n            _context2.prev = 10;\n            _context2.next = 13;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 13:\n            _data = _context2.sent;\n            filterArray = _data.filter(function (data) {\n              return data.fields.authorID === uid;\n            });\n            setData(filterArray);\n            _context2.next = 22;\n            break;\n\n          case 18:\n            _context2.prev = 18;\n            _context2.t1 = _context2[\"catch\"](10);\n            setErrors(true);\n            setSomeErrors(\"ERROR: \" + hasError + \" my error \" + _context2.t1);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 7], [10, 18]], Promise);\n  }\n\n  useEffect(function () {\n    if (isLoading == true) {\n      setLoading(false);\n      fetchData();\n      fetchFavs();\n    }\n\n    setLoading(false);\n  });\n\n  function handleRemove(id, author) {\n    var url = \"http://127.0.0.1:8000/vegan/favorites_delete/\" + id + \"&\" + author;\n    axios.delete(url).then(function (res) {\n      setLoading(true);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }\n\n  ;\n\n  if (isLoading == true) {\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        padding: 20,\n        justifyContent: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#00ff00\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }));\n  } else if (hasError) {\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        padding: 20,\n        justifyContent: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, \"You're probably not connected to the internet\"), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, \"\" + someError));\n  } else {\n    function cell(_ref) {\n      var item = _ref.item;\n      return React.createElement(Card, {\n        style: styles.card,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 3\n        }\n      }, React.createElement(View, {\n        style: styles.myText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 3\n        }\n      }, React.createElement(Text, {\n        style: styles.row,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 5\n        }\n      }, \"Title : \", item.fields.title), React.createElement(View, {\n        style: styles.column,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 5\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 2\n        }\n      }, React.createElement(Icon, {\n        name: \"trash\",\n        type: \"evilicon\",\n        size: \"50\",\n        onPress: function onPress() {\n          return handleRemove(item.pk, item.fields.authorID);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 8\n        }\n      })))));\n    }\n\n    return React.createElement(View, {\n      style: styles.background,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 5\n      }\n    }, React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }\n    }, React.createElement(Card, {\n      style: styles.card,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: styles.suggText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }, \"Favorites\"), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, \" Here you can see your favorites\")), userID ? React.createElement(FlatList, {\n      data: data,\n      keyExtractor: function keyExtractor(item, data) {\n        return item.id;\n      },\n      renderItem: cell,\n      style: {\n        marginTop: 10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }\n    }) : React.createElement(Card, {\n      style: styles.card,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, \"Looks like you dont have a user account yet.\"), React.createElement(Button, {\n      onPress: function onPress() {\n        return props.navigation.navigate({\n          routeName: 'SignUp'\n        });\n      },\n      title: \"Learn More\",\n      color: \"#841584\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }\n    }))));\n  }\n\n  ;\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    padding: 30,\n    paddingTop: 50,\n    flex: 1,\n    margin: 0\n  },\n  background: {\n    flex: 1,\n    backgroundColor: Colors.background\n  },\n  button: {\n    alignItems: 'center',\n    backgroundColor: '#DDDDDD',\n    padding: 10,\n    width: '100%',\n    marginTop: 16\n  },\n  gradient: {\n    flex: 1\n  },\n  card: {\n    padding: 10,\n    margin: 5\n  },\n  column: {\n    flexDirection: 'column',\n    alignItems: 'flex-end'\n  },\n  myText: {\n    justifyContent: 'space-around',\n    flexDirection: 'column'\n  },\n  text: {\n    fontSize: 10\n  },\n  suggText: {\n    padding: 5,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    fontSize: 20,\n    color: 'black',\n    fontWeight: 'bold'\n  }\n});\nexport default FavoriteScreen;","map":{"version":3,"sources":["/Users/pandemona/Documents/From Backup/Vegaani_Application/ReactApplication/vegancos/screens/FavoritesScreen.js"],"names":["React","useState","useEffect","axios","firebase","Card","Colors","Icon","FavoriteScreen","props","hasError","setErrors","someError","setSomeErrors","myFilter","setMyFilter","userID","setUserID","data","setData","isLoading","setLoading","user","auth","currentUser","name","uid","fetchData","displayName","fetchFavs","res","fetch","json","filterArray","filter","fields","authorID","handleRemove","id","author","url","delete","then","catch","err","console","log","flex","padding","justifyContent","cell","item","styles","card","myText","row","title","column","pk","background","container","suggText","marginTop","navigation","navigate","routeName","StyleSheet","create","paddingTop","margin","backgroundColor","button","alignItems","width","gradient","flexDirection","text","fontSize","alignContent","color","fontWeight"],"mappings":"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","sourcesContent":["\nimport React, {useState, useEffect} from 'react';\nimport { StyleSheet, View,  Text,  FlatList, Button, ActivityIndicator } from 'react-native';\nimport axios from 'axios';\nimport firebase from 'firebase';\n\nimport Card from '../components/Card';\nimport Colors from '../constants/Colors';\nimport { Icon } from 'react-native-elements';\n\nconst FavoriteScreen = props => {\n  const [hasError, setErrors] = useState(false);\n  const [someError, setSomeErrors] = useState('');\n    const[myFilter, setMyFilter] = useState([]);\n    const [userID, setUserID] = useState(false);\n    const [data, setData] = useState([]);\n    const [isLoading, setLoading] = useState(true);\n    var user = firebase.auth().currentUser;\n    var name, uid;\n\n  \n    async function fetchData() {\n      if (user != null) {\n        name = user.displayName;\n        uid = user.uid;  \n        setUserID(true);\n      }\n    }\n\n      \n      async function fetchFavs() {\n        let res = null;\n        try {\n          res = await fetch(\"http://127.0.0.1:8000/vegan/favorites/\");\n        }\n        catch (error) {\n          setErrors(true);\n        }\n        try {\n          const data = await res.json();\n          const filterArray = data.filter(data => data.fields.authorID === uid)\n\n          setData(filterArray);\n          \n           \n       \n        }\n        catch (err) {\n          setErrors(true);\n          setSomeErrors(\"ERROR: \" + hasError + \" my error \" + err);\n        }\n      }\n  \n    \n    \n\n    useEffect(() => {\n\n      if (isLoading == true) {\n        setLoading(false);\n        fetchData();\n        fetchFavs();\n      \n      }\n      setLoading(false)\n    });\n\n\nfunction handleRemove (id, author) {\n    const url = `http://127.0.0.1:8000/vegan/favorites_delete/${id}&${author}`;\n\n    axios\n\t  .delete(url)\n\t  .then(res => {\n        setLoading(true)\n    })\n   \n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n\n\n  \n\n  if (isLoading == true) {\n    // if the data does not get loaded yet, we show an Activity Indicator\n    return (\n      <View style={{ flex: 1, padding: 20, justifyContent: 'center' }}>\n        <ActivityIndicator size=\"large\" color=\"#00ff00\" />\n      </View>\n    );\n  }\n  else if (hasError) {\n    return (\n      <View style={{ flex: 1, padding: 20, justifyContent: 'center' }}>\n        <Text>You're probably not connected to the internet</Text>\n        <Text>{\"\" + someError}</Text>\n      </View>\n    );\n  }\n  else{\n\nfunction cell ({item}){\n\n\n \n  return (\n  <Card style={styles.card}>\n  <View style={styles.myText}>  \n    <Text style={styles.row}>Title : {item.fields.title}</Text>\n    <View style={styles.column}>\n      \n\t<Text><Icon\n  \t\t     name='trash'\n  \t\t\ttype='evilicon'\n\t\t\tsize='50'\n\t\t\tonPress={() => handleRemove(item.pk, item.fields.authorID)}\n\t\t\t/></Text>\n      \n   \n</View>\n  </View>\n  </Card>\n  )\n}\n  return (\n    <View style={styles.background}>\n    <View style={styles.container}>\n      <Card style={styles.card}>\n        <Text style={styles.suggText}>Favorites</Text>\n        <Text> Here you can see your favorites</Text>\n        </Card>\n      {userID ? (\n      <FlatList\n        data={data}\n        keyExtractor={(item, data) => { return item.id}}            \n        renderItem={cell  }\n        style={{ marginTop: 10 }} />\n      ): (\n          <Card style={styles.card}>\n        <Text>\n          \n            Looks like you dont have a user account yet.\n        </Text> \n        <Button\n     onPress={() => props.navigation.navigate({\n       routeName: 'SignUp',\n     })}\n       title=\"Learn More\"\n        color=\"#841584\"\n  \n/>\n        </Card>\n      )}\n     \n    </View>\n    </View>\n  \n  );\n};\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 30,\n    paddingTop: 50,\n      flex: 1,\n      margin: 0,\n    },\n    background: {\n      flex: 1,\n      backgroundColor: Colors.background,\n    },\n  button: {\n    alignItems: 'center',\n    backgroundColor: '#DDDDDD',\n    padding: 10,\n    width: '100%',\n    marginTop: 16,\n  },\n  gradient: {\n\t\tflex: 1, \n    },\n    card: {\n\t\t  padding: 10,\n      margin: 5,\n    },\n    column: {\n     flexDirection: 'column',\n      alignItems: 'flex-end'\n    },\n    myText: {\n      justifyContent: 'space-around',\n      flexDirection: 'column',\n    },\n    text: {\n      fontSize: 10,\n    },\n    suggText: {\n      padding: 5,   \n      justifyContent: 'center',\n      alignContent: 'center',\n      alignItems: 'center',\n      fontSize: 20,\n      color: 'black',\n      fontWeight: 'bold',\n    },\n   \n});\n\nexport default FavoriteScreen;"]},"metadata":{},"sourceType":"module"}