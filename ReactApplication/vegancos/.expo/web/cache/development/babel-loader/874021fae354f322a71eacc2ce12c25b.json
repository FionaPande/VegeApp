{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/pandemona/Documents/From Backup/Vegaani_Application/ReactApplication/vegancos/screens/HomeScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport * as firebase from 'firebase';\nimport CategoryCards from \"../components/CategoryCards\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { HeaderButtons, Item } from 'react-navigation-header-buttons';\nimport HeaderButton from \"../components/HeaderButton\";\nimport Card from \"../components/Card\";\nimport Colors from \"../constants/Colors\";\n\nvar HomeScreen = function HomeScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasError = _useState2[0],\n      setErrors = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      someError = _useState4[0],\n      setSomeErrors = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      test = _useState10[0],\n      setTest = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      cate = _useState12[0],\n      setCate = _useState12[1];\n\n  var user = firebase.auth().currentUser;\n  var name, email, uid;\n\n  if (user != null) {\n    name = user.displayName;\n    email = user.email;\n    uid = user.uid;\n  }\n\n  function fetchCategories() {\n    var res, _data, filtered;\n\n    return _regeneratorRuntime.async(function fetchCategories$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            res = null;\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(fetch(\"http://127.0.0.1:8000/vegan/categories/\"));\n\n          case 4:\n            res = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](1);\n            setErrors(true);\n\n          case 10:\n            _context.prev = 10;\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 13:\n            _data = _context.sent;\n            setCate(_data);\n            filtered = _data.filter(function (d) {\n              return d.pk < 10;\n            });\n            setCate(filtered);\n            global.categories = cate;\n            _context.next = 24;\n            break;\n\n          case 20:\n            _context.prev = 20;\n            _context.t1 = _context[\"catch\"](10);\n            setErrors(true);\n            setSomeErrors(\"ERROR: \" + hasError + \" my error \" + _context.t1);\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 7], [10, 20]], Promise);\n  }\n\n  function fetchData() {\n    var res, responseData;\n    return _regeneratorRuntime.async(function fetchData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            res = null;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(fetch(\"http://127.0.0.1:8000/vegan/products/\"));\n\n          case 4:\n            res = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n            setErrors(true);\n\n          case 10:\n            _context2.prev = 10;\n            _context2.next = 13;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 13:\n            responseData = _context2.sent;\n            setData(responseData);\n            global.myData = responseData;\n            _context2.next = 22;\n            break;\n\n          case 18:\n            _context2.prev = 18;\n            _context2.t1 = _context2[\"catch\"](10);\n            setErrors(true);\n            setSomeErrors(\"ERROR: \" + hasError + \" my error \" + _context2.t1);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 7], [10, 18]], Promise);\n  }\n\n  useEffect(function () {\n    if (isLoading == true) {\n      setLoading(false);\n      fetchData();\n      fetchCategories();\n    }\n  });\n\n  if (isLoading == true) {\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        padding: 20,\n        justifyContent: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#00ff00\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }));\n  } else if (hasError) {\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        padding: 20,\n        justifyContent: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, \"You're probably not connected to the internet\"), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, \"\" + someError));\n  } else {\n    var renderGridItem = function renderGridItem(itemData) {\n      return React.createElement(CategoryCards, {\n        style: styles.authContainer,\n        title: itemData.item.fields.catID,\n        onSelect: function onSelect() {\n          props.navigation.navigate({\n            routeName: 'CategoryProduct',\n            params: {\n              categoryId: itemData.item.pk,\n              categoryTitle: itemData.item.fields.catID\n            }\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      });\n    };\n\n    return React.createElement(View, {\n      style: styles.screen,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: styles.welcome,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.suggText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, \" Hello \", name)), React.createElement(CategoryCards, {\n      style: styles.authContainer,\n      title: \"MakeUp\",\n      onSelect: function onSelect() {\n        props.navigation.navigate({\n          routeName: 'MakeUp'\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 8\n      }\n    }), React.createElement(FlatList, {\n      keyExtractor: function keyExtractor(item, index) {\n        return item.pk;\n      },\n      data: cate,\n      renderItem: renderGridItem,\n      numColumns: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }));\n  }\n\n  ;\n};\n\nHomeScreen.navigationOptions = function (navData) {\n  return {\n    headerTitle: 'Categories',\n    headerLeft: React.createElement(HeaderButtons, {\n      HeaderButtonComponent: HeaderButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 7\n      }\n    }, React.createElement(Item, {\n      title: \"Menu\",\n      iconName: Platform.OS === 'android' ? 'md-menu' : 'ios-menu',\n      onPress: function onPress() {\n        navData.navigation.toggleDrawer();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }))\n  };\n};\n\nvar styles = StyleSheet.create({\n  screen: {\n    flex: 1,\n    paddingTop: 10,\n    backgroundColor: Colors.background\n  },\n  card: {\n    padding: 5,\n    width: '90%',\n    marginBottom: 20,\n    opacity: 0.8,\n    backgroundColor: Colors.background,\n    alignItems: 'center',\n    alignContent: 'center'\n  },\n  authContainer: {\n    width: '90%',\n    maxWidth: 600,\n    maxHeight: 50,\n    padding: 7,\n    alignContent: 'center',\n    alignSelf: 'center',\n    textAlign: \"center\"\n  },\n  suggText: {\n    padding: 5,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    fontSize: 20,\n    color: Colors.primaryText\n  },\n  welcome: {\n    alignItems: 'center'\n  },\n  text: {\n    padding: 5,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    fontSize: 12,\n    color: Colors.primaryText\n  }\n});\nexport default HomeScreen;","map":{"version":3,"sources":["/Users/pandemona/Documents/From Backup/Vegaani_Application/ReactApplication/vegancos/screens/HomeScreen.js"],"names":["React","useState","useEffect","firebase","CategoryCards","LinearGradient","HeaderButtons","Item","HeaderButton","Card","Colors","HomeScreen","props","hasError","setErrors","someError","setSomeErrors","data","setData","isLoading","setLoading","test","setTest","cate","setCate","user","auth","currentUser","name","email","uid","displayName","fetchCategories","res","fetch","json","filtered","filter","d","pk","global","categories","fetchData","responseData","myData","flex","padding","justifyContent","renderGridItem","itemData","styles","authContainer","item","fields","catID","navigation","navigate","routeName","params","categoryId","categoryTitle","screen","welcome","suggText","index","navigationOptions","navData","headerTitle","headerLeft","Platform","OS","toggleDrawer","StyleSheet","create","paddingTop","backgroundColor","background","card","width","marginBottom","opacity","alignItems","alignContent","maxWidth","maxHeight","alignSelf","textAlign","fontSize","color","primaryText","text"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {View, Text, FlatList, StyleSheet, ActivityIndicator} from 'react-native';\nimport * as firebase from 'firebase';\n\n\nimport CategoryCards from '../components/CategoryCards';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { HeaderButtons, Item } from 'react-navigation-header-buttons';\nimport HeaderButton from '../components/HeaderButton';\nimport Card from '../components/Card';\nimport Colors from '../constants/Colors'\n\nconst HomeScreen = props => {\n  const [hasError, setErrors] = useState(false);\n  const [someError, setSomeErrors] = useState('');\n  const [data, setData] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  const [test, setTest] = useState(true);\n  const[cate, setCate] = useState([]);\n  var user = firebase.auth().currentUser;\n  var name, email, uid;\n  \n  if (user != null) {\n    name = user.displayName;\n    email = user.email;\n    uid = user.uid;       \n  }\n  async function fetchCategories() {\n    let res = null;\n    try {\n      res = await fetch(\"http://127.0.0.1:8000/vegan/categories/\");\n    }\n    catch (error) {\n      setErrors(true);\n    }\n    try {\n      const data = await res.json();\n      setCate(data);\n      const filtered = data.filter(d=>d.pk <10)\n        setCate(filtered)\n        global.categories = cate\n       \n   \n    }\n    catch (err) {\n      setErrors(true);\n      setSomeErrors(\"ERROR: \" + hasError + \" my error \" + err);\n    }\n  }\n  async function fetchData() {\n    let res = null;\n    try {\n      res = await fetch(\"http://127.0.0.1:8000/vegan/products/\");\n    }\n    catch (error) {\n      setErrors(true);\n    }\n    try {\n      const responseData = await res.json();\n      setData(responseData);\n      global.myData = responseData;\n\n      // sets the data received from restful service as a global object that can be used anywhere\n    }\n    catch (err) {\n      setErrors(true);\n      setSomeErrors(\"ERROR: \" + hasError + \" my error \" + err);\n    }\n  }\n  useEffect(() => {\n    if (isLoading == true) {\n      setLoading(false);\n      fetchData();\n      fetchCategories();\n    }\n  });\n  if (isLoading == true) {\n    // if the data does not get loaded yet, we show an Activity Indicator\n    return (\n      <View style={{ flex: 1, padding: 20, justifyContent: 'center' }}>\n        <ActivityIndicator size=\"large\" color=\"#00ff00\" />\n      </View>\n    );\n  }\n  else if (hasError) {\n    return (\n      <View style={{ flex: 1, padding: 20, justifyContent: 'center' }}>\n        <Text>You're probably not connected to the internet</Text>\n        <Text>{\"\" + someError}</Text>\n      </View>\n    );\n  }\n  else {\n    const renderGridItem = itemData => {\n      return (\n        \n        <CategoryCards style={styles.authContainer}\n          title={itemData.item.fields.catID}\n          onSelect={() => {\n            props.navigation.navigate({\n              routeName: 'CategoryProduct',\n              params: {\n                categoryId: itemData.item.pk,\n                categoryTitle: itemData.item.fields.catID\n             \n                // we forward the ID and title to the next screen\n              }\n            });\n          }}\n        />\n      );\n    };\n    \n\n    return (\n   \n      <View style={styles.screen}>\n        <View style={styles.welcome}>\n        \n        <Text style={styles.suggText}> Hello {name}</Text>\n     \n        \n       </View>\n       \n       <CategoryCards style={styles.authContainer}\n          title=\"MakeUp\"\n          onSelect={() => {\n            props.navigation.navigate({\n              routeName: 'MakeUp',\n              \n            });\n          }}\n        />\n          <FlatList\n            keyExtractor={(item, index) => item.pk}\n            data={cate}\n            renderItem={renderGridItem}\n            numColumns={1}\n          />\n     \n      </View>\n  \n\n    );\n  };\n}\nHomeScreen.navigationOptions = navData => {\n  return {\n    headerTitle: 'Categories',\n    headerLeft: (\n      <HeaderButtons HeaderButtonComponent={HeaderButton}>\n        <Item\n          title=\"Menu\"\n          iconName={Platform.OS === 'android' ? 'md-menu' : 'ios-menu'}\n          onPress={() => {\n            navData.navigation.toggleDrawer();\n          }}\n        />\n      </HeaderButtons>\n    )\n  };\n};\n\nconst styles = StyleSheet.create({\n  screen: {\n    flex: 1,\n    paddingTop: 10,\n    backgroundColor: Colors.background\n  },\n  card: {\n    padding: 5,\n    width: '90%',\n    marginBottom: 20,\n    opacity: 0.8,\n    backgroundColor: Colors.background,\n    alignItems: 'center',\n    alignContent: 'center'\n  },\n  authContainer: {\n    width: '90%',\n    maxWidth: 600,\n    maxHeight: 50,\n    padding: 7,\n    alignContent: 'center',\n    alignSelf: 'center',\n    textAlign: \"center\",\n  },\n  suggText: {\n    padding: 5,   \n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    fontSize: 20,\n   color: Colors.primaryText,\n    \n  },\n  welcome: {\n    alignItems: 'center',\n  },\n  text: {\n    padding: 5,   \n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n    fontSize: 12,\n    color: Colors.primaryText,\n  }\n});\n\nexport default HomeScreen;"]},"metadata":{},"sourceType":"module"}